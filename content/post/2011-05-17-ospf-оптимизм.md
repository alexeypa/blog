---
author: admin
comments: true
date: 2011-05-17 00:54:15+00:00
excerpt: None
link: http://blog.not-a-kernel-guy.com/2011/05/16/1074
slug: ospf-оптимизм
title: 'OSPF: оптимизм.'
wordpress_id: 1074
categories:
- itblogs
tags:
- Юмор
- Networking
- OSPF
---

Протокол [Open Shortest Path First (OSPF)](http://en.wikipedia.org/wiki/Open_Shortest_Path_First) позволяет IP-маршрутизаторам автоматически определять топологию сети и генерировать оптимальные таблицы маршрутизации. Публикуемые элементы топологии снабжаются меткой возраста и порядковым номером. Тем самым даже «застрявшие» записи будут выброшены из базы со временем.

Метка возраста – 16-и битное число, интерпретируется как время в секундах с момента публикации элемента. Максимальное значение метки может быть ограничено константой MaxAge, практическое минимальное значение которой составляет порядка минут. Когда возраст записи достигает MaxAge, опубликованный элемент обновляется увеличением порядкового номера на единицу. 

Порядковый номер – 32-х битное целое число. При переполнении счетчика **спецификация предусматривает специальную процедуру**, позволяющую корректно продолжить счет, так как минимальное значение счетчика зарезервировано.

Теперь давайте посчитаем. 64K секунд – это <del>45 с половиной суток</del> 18 часов. Учитывая, что при первой публикации порядковый номер выставляется в минимально разрешенное значение, то время до переполнения счетчика получается порядка **<del>535</del>  8 миллионов лет**. Даже если ограничить максимальный возраст одной минутой, всё равно получается **больше восьми тысяч лет**. Вопрос: зачем вообще обрабатывать переполнение этого счетчика?
