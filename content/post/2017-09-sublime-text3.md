---
date: 2017-09-17T22:01:02-07:00
slug: sublime-text-3
tags:
- Инструменты
- Sublime Text
- zsh
title: Sublime Text 3
---

Вышел [Sublime Text 3](
https://www.sublimetext.com/blog/articles/sublime-text-3-point-0) и у меня
наконец дошли руки его попробовать. Страница с анонсом упирает на
производительность - по моим первым ощущениям похоже на правду. Завтра поставлю
на работе, посмотрим как он запоет. Новая тема приятна на глаз; шрифты
отрисовываются на отлично. Радует также, что у кнопки Replace на панели Find in
Files появилась горячая комбинация клавиш. Раньше приходилось мышью щелкать.
В общем пока что впечатления самые приятные. Старого не испортили; приятного -
добавили.

По случаю ковыряния в настройках довел до ума [thefuck](
https://github.com/nvbn/thefuck) под zsh. Эта утилита, название которой на
русский вполне точно можно перевести как "бля", исправляет неправильную
набранную команду в консоли. Забытый `sudo` подставляет или `git statis`
исправляет на `git status` - стоит только ввести `fuck` в ответ на ошибочную
команду. У меня она почему-то выдавала сообщения вида "fc: event not found: -c".

<!--more-->

Поковырявшись в исходниках и настройках, обнаружил правильную последовательность
команд. Во-первых, нужно использовать Python 3, так как поддержке Python 2
похоже [не долго осталось](https://github.com/nvbn/thefuck/issues/685).
Во-вторых, thefuck пытался выполнить `history -c`, которая в zsh при
установленном [Oh My Zsh](https://github.com/robbyrussell/oh-my-zsh) [приводит к
сообщению](https://github.com/robbyrussell/oh-my-zsh/issues/739):

```zsh
fc: event not found: -c
```

Оказалось, что thefuck неправильно определяет шелл. Он смотрит на переменную
окружения `SHELL`. В моем случае zsh не установлена как login shell, а
запускается из bash (не спрашивайте). Соответственно `SHELL` по прежнему
указывает на bash. Пришлось добавить следующее в `~/.zshrc`:

```zsh
export SHELL=/usr/bin/zsh
```

После этого все заработало как по маслу. На десерт осталось только включить
[плагин thefuck](
https://github.com/robbyrussell/oh-my-zsh/tree/master/plugins/thefuck) в Oh My
Zsh. Этот плагин позволяет исправить команду по Esc-Esc. И все заработало.
